{% extends 'home/base.html' %}

{% block full %}
	<div class="col s4">
		{% if request.session.player1 %}
			<div class="card brown darken-2">
				<div class="card-content">
					<span> 
						<i class="material-icons">person</i>
						{{ request.session.player1.username }}
					</span>

					<span class="right">
						<form action="/" method="POST">
							{% csrf_token %}
							<input name="logout_user_1" hidden="true">
							<button class="btn" id="logout-button" type="submit">
								<i class="material-icons">clear</i>
							</button>
						</form>
					</span>
				</div>
			</div>

			{% if challenges_player1 %}
				<div class="card brown darken-2">
					<div class="card-content">
						{% for challenge in challenges_player1 %}
							<span>
								<i class="material-icons">person</i>
								{{challenge.player1.username}} har utfordret deg
							</span>

							<span class="right">
								<form action="/" method="POST">
									{% csrf_token %}
									<input name="answer_challenge" hidden="true">
									<button name= "deny" class="btn red" id="deny" type="submit" value="{{challenge.pk}}">
										<i class="material-icons">clear</i>
									</button>
									<button name="accept" class="btn" id="accept" type="submit" value="{{challenge.pk}}">
										<i class="material-icons">add</i>
									</button>
								</form>
							</span>
							
						{% endfor %}
					</div>
				</div>
			{% endif %}

			{% if matches_player1 %}
				<div class="card brown darken-2">
					<div class="card-content">
						<span class="card-title"> Active matches </span><br>
						{% for match in matches_player1 %}
							<span> {{match.pk}} {{match.player_white_pk}} {{match.player_black_pk}} </span>
						{% endfor %}
					</div>
				</div>
			{% endif %}
		{% else %}
			<div class="card">
				<div class="card-content">
					<span class="card-title center"> Logg inn eller opprett bruker </span>
					<div id="LoginPlayer1Form">
						<form action="/" method="POST">
							{% csrf_token %}
							<input name="login_user_1" hidden="true">
							<label for="username"> username </label>
							<input id="username" name="username" type="text">
							<label for="password"> password </label>
							<input id="password" name="password" type="password">
							<button class="btn" id="login-button" type="submit"> Send </button>
						</form>
					</div>
				</div>
			</div>
		{% endif %}
	</div>

	<div class="col s4">
		{% if request.session.player1 %}
			{% if request.session.player2 %}
				<div class="card brown darken-2">
					<div class="card-content">
						<span class="center">
							<form action="/" method="POST">
								{% csrf_token %}
								<input name="start_game" class="btn" type="submit" value="Start Spill">
							</form>
						</span>
					</div>
				</div>
			{% else %}
				<p></p>
			{% endif %}
		{% else %}
			<p></p>
		{% endif %}
	</div>

	<div class="col s4">
		{% if request.session.player2 %}
				<div class="card brown darken-2">
					<div class="card-content">
						<span> 
							<i class="material-icons">person</i>
							{{ request.session.player2.username }}
						</span>
						<span class="right">
							<form action="/" method="POST">
								{% csrf_token %}
								<input name="logout_user_2" hidden="true">
								<button class="btn" id="logout-button" type="submit">
									<i class="material-icons">clear</i>
								</button>
							</form>
						</span>
					</div>
				</div>
		{% else %}
			{% if request.session.player1 %}
			<div class="card-panel brown darken-2">
					<div>
						<form action="/" method="POST">
							{% csrf_token %}
							<div class="select-opponent">
								{{ opponent_picker_form }}
							</div>
							<span class="right" style="padding-top:22px;">
								<input class="btn" id="input-box" type="submit" value="Velg">
							</span>
						</form>
					</div>
			</div>
			{% endif %}
			<div class="card">
				<div class="card-content">
					<span class="card-title center"> Logg inn eller opprett bruker </span>
					<div id="LoginPlayer1Form">
						<form action="/" method="POST">
							{% csrf_token %}
							<input name="login_user_2" hidden="true">
							<label for="username"> username </label>
							<input id="username" name="username" type="text">
							<label for="password"> password </label>
							<input id="password" name="password" type="password">
							<button class="btn" id="login-button" type="submit"> Send </button>
						</form>
					</div>
				</div>
			</div>
		{% endif %}
	</div>
{% endblock %}